

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mtk.ga.input &mdash; mtk  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="mtk  documentation" href="../../../index.html"/>
        <link rel="up" title="Module code" href="../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> mtk
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">mtk</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>mtk.ga.input</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for mtk.ga.input</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Defines classes which deal with input.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">psutil</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">.ga_tools</span> <span class="k">import</span> <span class="n">GATools</span>
<span class="kn">from</span> <span class="nn">.selection</span> <span class="k">import</span> <span class="n">Selection</span>
<span class="kn">from</span> <span class="nn">.mutation</span> <span class="k">import</span> <span class="n">Mutation</span>
<span class="kn">from</span> <span class="nn">.crossover</span> <span class="k">import</span> <span class="n">Crossover</span>
<span class="kn">from</span> <span class="nn">.normalization</span> <span class="k">import</span> <span class="n">Normalization</span>
<span class="kn">from</span> <span class="nn">.ga_exit</span> <span class="k">import</span> <span class="n">Exit</span>

<span class="kn">from</span> <span class="nn">..</span> <span class="k">import</span> <span class="n">ga</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="k">import</span> <span class="n">molecular</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="k">import</span> <span class="n">convenience_tools</span>

<span class="kn">from</span> <span class="nn">..convenience_tools</span> <span class="k">import</span> <span class="n">FunctionData</span>


<div class="viewcode-block" id="GAInput"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput">[docs]</a><span class="k">class</span> <span class="nc">GAInput</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class for reading a GA&#39;s input file.</span>

<span class="sd">    An ``mtk`` input file is a Python script. The script must define a</span>
<span class="sd">    set of variables. Each variable defines a parameter or a function</span>
<span class="sd">    used by the GA. If the variable defines a function, it must also</span>
<span class="sd">    define any parameters necessary to use the function. It does</span>
<span class="sd">    not have to define any default initialized parameters, though it</span>
<span class="sd">    may if desired.</span>

<span class="sd">    Each variable name defined in the input file must corresond to an</span>
<span class="sd">    attribute of this class.</span>

<span class="sd">    Variables which define a function or method are supplied as</span>
<span class="sd">    dictionaries, for example:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        fitness_func = {&#39;NAME&#39; : &#39;func_name&#39;,</span>
<span class="sd">                        &#39;param1_name&#39; : param1_val,</span>
<span class="sd">                        &#39;param2_name&#39; : param2_val}</span>

<span class="sd">    Key points from the line example are:</span>

<span class="sd">        1. The variable name (e.g. ``fitness_func``) specifies the GA</span>
<span class="sd">           operation and matches the name of an attribute of</span>
<span class="sd">           :class:`GAInput`.</span>
<span class="sd">        2. The key ``&#39;NAME&#39;`` holds the name of the function which</span>
<span class="sd">           carries out the GA operation. Note the difference between</span>
<span class="sd">           the variable name specifying the generic role, i.e. a</span>
<span class="sd">           fitness function, versus the value for ``&#39;NAME&#39;`` holding</span>
<span class="sd">           the name of the function which carries out that role.</span>
<span class="sd">        3. Any parameters which the function needs are provided as key</span>
<span class="sd">           value pairs where the keys are strings holding the parameter</span>
<span class="sd">           name.</span>

<span class="sd">    Valid functions for a given role are described in the corresponding</span>
<span class="sd">    attribute of :class:`GAInput`.</span>

<span class="sd">    Some variables will need to define other parameters used by the GA</span>
<span class="sd">    such as constants or lists of constants,</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        num_generations = 5</span>
<span class="sd">        databases = [&#39;first/path&#39;, &#39;second/path&#39;]</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    num_cores : :class:`int`</span>
<span class="sd">        The number of CPUs to be used when running operations in</span>
<span class="sd">        parallel. This does not have to be specified in the input file.</span>
<span class="sd">        If not specified, the number will default to the value returned</span>
<span class="sd">        by :func:`psutil.cpu_count`</span>

<span class="sd">    pop_size : :class:`int`</span>
<span class="sd">        The size of the population.</span>

<span class="sd">    num_generations : :class:`int`</span>
<span class="sd">        The number of generations the GA runs for.</span>

<span class="sd">    num_mutations: :class:`int`</span>
<span class="sd">        The number of mutation operations carried out per generation.</span>

<span class="sd">    num_crossovers: :class:`int`</span>
<span class="sd">        The number of crossover operations carried out per generation.</span>

<span class="sd">    init_func : :class:`dict`</span>
<span class="sd">        This must define the parameters of a :class:`.Population`</span>
<span class="sd">        initializer.</span>

<span class="sd">    generational_select_func : :class:`dict`</span>
<span class="sd">        This must define the parameters of a :class:`.Selection`</span>
<span class="sd">        method. This will be the function used to select members of the</span>
<span class="sd">        next generation.</span>

<span class="sd">    crossover_select_func : :class:`dict`</span>
<span class="sd">        This must define the parameters of a :class:`.Selection`</span>
<span class="sd">        method. This will be the function used to select molecules for</span>
<span class="sd">        crossover.</span>

<span class="sd">    mutation_select_func : :class:`dict`</span>
<span class="sd">        This must define the parameters of a :class:`.Selection`</span>
<span class="sd">        method. This will be the function used to select molecules for</span>
<span class="sd">        mutation.</span>

<span class="sd">    crossover_funcs : :class:`list` of :class:`dict`</span>
<span class="sd">        This :class:`list` holds a :class:`dict` for each crossover</span>
<span class="sd">        function which is to be used by the GA. The functions are</span>
<span class="sd">        defined as methods in :class:`.Crossover`</span>

<span class="sd">    mutation_funcs : :class:`list` of :class:`dict`</span>
<span class="sd">        This :class:`list` holds a :class:`dict` for each mutation</span>
<span class="sd">        function which is to be used by the GA. The functions are</span>
<span class="sd">        defined as methods in :class:`.Mutation`</span>

<span class="sd">    opt_func : :class:`dict`</span>
<span class="sd">        This must define the parameters of a function defined in</span>
<span class="sd">        :mod:`.optimization`. This will be the function used to</span>
<span class="sd">        optimize the structures of the molecules.</span>

<span class="sd">    fitness_func : :class:`dict`</span>
<span class="sd">        This must define the parameters of a function defined in</span>
<span class="sd">        :mod:`.fitness`. This will be the function used to</span>
<span class="sd">        calculate the fitness of the molecules.</span>

<span class="sd">    mutation_weights : :class:`list` of :class:`int`</span>
<span class="sd">        The probability that each function in :attr:`mutation_funcs`</span>
<span class="sd">        will be selected each time a mutation operation is carried out.</span>
<span class="sd">        The order of the probabilities corresponds to the order of the</span>
<span class="sd">        mutation functions in :attr:`mutation_funcs`.</span>

<span class="sd">    normalization_funcs : :class:`list` of :class:`dict`</span>
<span class="sd">        This :class:`list` holds a :class:`dict` for each normalization</span>
<span class="sd">        function used to rescale or normalize the population&#39;s fitness</span>
<span class="sd">        values. The order reflects the order in which they are applied</span>
<span class="sd">        each generation. The functions are defined as methods in</span>
<span class="sd">        :class:`.Normalization`. This can be ommited from the input</span>
<span class="sd">        file which means that no normalization functions will be used.</span>

<span class="sd">    databases : :class:`list` of :class:`str`</span>
<span class="sd">        A :class:`list` which holds the paths to any number ``JSON``</span>
<span class="sd">        files. These files must hold the ``JSON`` representations of</span>
<span class="sd">        dumped :class:`.Population` instances. All the molecules in the</span>
<span class="sd">        populations are loaded into memory for the duration of the GA</span>
<span class="sd">        run. Molecules loaded in this way do not have to be built,</span>
<span class="sd">        re-optimized or have fitness values recalculated when</span>
<span class="sd">        encountered by the GA.</span>

<span class="sd">    parallel : :class:`bool`</span>
<span class="sd">        If ``True`` the GA does optimization and fitness calculation of</span>
<span class="sd">        each molecule in parallel. Can be omitted from the input file</span>
<span class="sd">        in which case the it defaults to ``True``.</span>

<span class="sd">    progress_dump : :class:`bool`</span>
<span class="sd">        If ``True`` a ``.json`` :class:`.Population` dump is made at</span>
<span class="sd">        the end of the GA run called ``progress.json``. The population</span>
<span class="sd">        holds each generation made by the GA as a subpopulation. This</span>
<span class="sd">        can be ommitted from the input file, in which case it</span>
<span class="sd">        defaults to ``True``.</span>

<span class="sd">    database_dump : :class:`bool`</span>
<span class="sd">        If ``True`` a ``.json`` :class:`.Population` dump is made at</span>
<span class="sd">        the end of the GA run called ``database.json``. The population</span>
<span class="sd">        holds every molecule made by the GA during its run. This can</span>
<span class="sd">        be omitted from the input file, in which case it defaults to</span>
<span class="sd">        ``True``.</span>

<span class="sd">    plot_epp : :class:`bool` or :class:`str`</span>
<span class="sd">        If a string is provided, it should hold the base name for the</span>
<span class="sd">        EPP plots made by the GA. If ``False`` then no EPP plots are</span>
<span class="sd">        made. This can be omitted from the input file, in which case</span>
<span class="sd">        it defaults to ``&#39;epp.png&#39;``.</span>

<span class="sd">    logging_level : :class:`int`</span>
<span class="sd">        The logging level for logging messages to the screen. This can</span>
<span class="sd">        be omitted from the input file in which case it defulats to</span>
<span class="sd">        ``logging.DEBUG``.</span>

<span class="sd">    counters : :class:`bool`</span>
<span class="sd">        If ``True`` plots of which molecules get chosen by selection</span>
<span class="sd">        functions are made. This can be omitted from the input file,</span>
<span class="sd">        in which case it defaults to ``True``.</span>

<span class="sd">    pop_dumps : :class:`bool`</span>
<span class="sd">        If ``True`` each generation makes a ``.json`` dump file. This</span>
<span class="sd">        can be omitted from the input file, in which case it defaults</span>
<span class="sd">        to ``True``.</span>

<span class="sd">    tar_output : :class:`bool`</span>
<span class="sd">        If ``True`` a copy of the output folder is compressed, tarred</span>
<span class="sd">        and placed in the output folder. This can be omitted from the</span>
<span class="sd">        input file, in which case it defaults to ``True``.</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="GAInput.__init__"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a :class:`GAInput` instance.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        input_file : :class:`str`</span>
<span class="sd">            The path to the GA input file.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inp</span><span class="p">:</span>
            <span class="n">mtk_namespace</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">mtk_namespace</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">convenience_tools</span><span class="p">))</span>
            <span class="n">mtk_namespace</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">molecular</span><span class="p">))</span>
            <span class="n">mtk_namespace</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">ga</span><span class="p">))</span>
            <span class="n">exec</span><span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">mtk_namespace</span><span class="p">,</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;plot_epp&#39;</span><span class="p">)</span> <span class="ow">and</span>
           <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;plot_epp&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_epp</span> <span class="o">=</span> <span class="s1">&#39;epp.png&#39;</span>

        <span class="c1"># If the input file did not specify some values, default</span>
        <span class="c1"># initialize them.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;num_cores&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_cores</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;num_crossovers&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_crossovers</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;num_mutations&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_mutations</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;mutation_weights&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mutation_weights</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;crossover_weights&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crossover_weights</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;normalization_funcs&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">normalization_funcs</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;exit_func&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exit_func</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;no_exit&#39;</span><span class="p">}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;databases&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">databases</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;parallel&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;progress_dump&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_dump</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;database_dump&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">database_dump</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;plot_epp&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_epp</span> <span class="o">=</span> <span class="s1">&#39;epp.png&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;logging_level&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logging_level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;counters&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">counters</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;pop_dumps&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pop_dumps</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;tar_output&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tar_output</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="GAInput.crosser"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.crosser">[docs]</a>    <span class="k">def</span> <span class="nf">crosser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use input file data to build :class:`.Crossover` instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.Crossover`</span>
<span class="sd">            A :class:`.Crossover` instance which has all of the</span>
<span class="sd">            crossover related data held by the :class:`.GAInput`</span>
<span class="sd">            instance.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">funcs</span> <span class="o">=</span> <span class="p">[</span><span class="n">FunctionData</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                              <span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span>
                                 <span class="n">k</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span>
                 <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_funcs</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">Crossover</span><span class="p">(</span><span class="n">funcs</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">num_crossovers</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">crossover_weights</span><span class="p">)</span></div>

<div class="viewcode-block" id="GAInput.exiter"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.exiter">[docs]</a>    <span class="k">def</span> <span class="nf">exiter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use input file data to build :class:`.Exit` instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.Exit`</span>
<span class="sd">            An :class:`.Exit` instance loaded with the exit function</span>
<span class="sd">            defined in the input file.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">func_data</span> <span class="o">=</span> <span class="n">FunctionData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exit_func</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                                 <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">exit_func</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span>
                                    <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">Exit</span><span class="p">(</span><span class="n">func_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="GAInput.fitnessor"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.fitnessor">[docs]</a>    <span class="k">def</span> <span class="nf">fitnessor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use input file data to  extract fitness function information.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.FunctionData`</span>
<span class="sd">            A :class:`.FunctionData` object which represents the</span>
<span class="sd">            fitness function.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">FunctionData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                            <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span>
                               <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span></div>

<div class="viewcode-block" id="GAInput.ga_tools"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.ga_tools">[docs]</a>    <span class="k">def</span> <span class="nf">ga_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use input file data to build a :class:`.GATools` instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.GATools`</span>
<span class="sd">            A :class:`.GATools` instance built from the information</span>
<span class="sd">            defined in the input file.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">GATools</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selector</span><span class="p">(),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">crosser</span><span class="p">(),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">mutator</span><span class="p">(),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">normalizer</span><span class="p">(),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">opter</span><span class="p">(),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">fitnessor</span><span class="p">(),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">exiter</span><span class="p">(),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">,</span>
                       <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="GAInput.initer"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.initer">[docs]</a>    <span class="k">def</span> <span class="nf">initer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use input file to  extract initialization function information.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.FunctionData`</span>
<span class="sd">            A :class:`.FunctionData` object which represents the</span>
<span class="sd">            initialization function.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">FunctionData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">init_func</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                            <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">init_func</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span>
                               <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span></div>

<div class="viewcode-block" id="GAInput.mutator"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.mutator">[docs]</a>    <span class="k">def</span> <span class="nf">mutator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use input file data to build :class:`.Mutation` instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.Mutation`</span>
<span class="sd">            A :class:`.Mutation` instance which has all of the</span>
<span class="sd">            mutation related data held in the input file.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">funcs</span> <span class="o">=</span> <span class="p">[</span><span class="n">FunctionData</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                 <span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span>
                 <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_funcs</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">Mutation</span><span class="p">(</span><span class="n">funcs</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">num_mutations</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_weights</span><span class="p">)</span></div>

<div class="viewcode-block" id="GAInput.normalizer"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.normalizer">[docs]</a>    <span class="k">def</span> <span class="nf">normalizer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use input file data to build :class:`.Normalization` instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.Normalization`</span>
<span class="sd">            A :class:`.Normalization` instance which has all of the</span>
<span class="sd">            normalization related data held in the input file.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">funcs</span> <span class="o">=</span> <span class="p">[</span><span class="n">FunctionData</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                 <span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span>
                 <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalization_funcs</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Normalization</span><span class="p">(</span><span class="n">funcs</span><span class="p">)</span></div>

<div class="viewcode-block" id="GAInput.opter"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.opter">[docs]</a>    <span class="k">def</span> <span class="nf">opter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use the input file to extract optimization function data.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.FunctionData`</span>
<span class="sd">            A :class:`.FunctionData` object which represents the</span>
<span class="sd">            optimization function defined in the input file.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">FunctionData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">opt_func</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                            <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">opt_func</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span></div>

<div class="viewcode-block" id="GAInput.selector"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.selector">[docs]</a>    <span class="k">def</span> <span class="nf">selector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use input file data to build :class:`.Selection` instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`.Selection`</span>
<span class="sd">            A :class:`.Selection` instance which has all of the</span>
<span class="sd">            selection related data held in the input file.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">gen</span> <span class="o">=</span> <span class="n">FunctionData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generational_select_func</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                           <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">generational_select_func</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span>
                              <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span>

        <span class="n">crossover</span> <span class="o">=</span> <span class="n">FunctionData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_select_func</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                                 <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">crossover_select_func</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                                    <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span>

        <span class="n">mutation</span> <span class="o">=</span> <span class="n">FunctionData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_select_func</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">],</span>
                                <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span>
                                   <span class="bp">self</span><span class="o">.</span><span class="n">mutation_select_func</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span>
                                   <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;NAME&#39;</span><span class="p">})</span>

        <span class="k">return</span> <span class="n">Selection</span><span class="p">(</span><span class="n">gen</span><span class="p">,</span> <span class="n">crossover</span><span class="p">,</span> <span class="n">mutation</span><span class="p">)</span></div>

<div class="viewcode-block" id="GAInput.__repr__"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.__repr__">[docs]</a>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span>
                           <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">())</span></div>

<div class="viewcode-block" id="GAInput.__str__"><a class="viewcode-back" href="../../../mtk.ga.input.html#mtk.ga.input.GAInput.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Lukas Turcani.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>